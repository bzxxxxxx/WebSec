# CSRF Attack

So lets say you're authenticated as admin in a website and you have the ability to delete user accounts, Now lets say that an attacker sends you a malicious link, you click on it and boom you come back to your website and all the user accounts are suddenly deleted.

Lets go a step back and analyze what's going on, so when you visit that website there was a hidden form that sends a request to delete all users to the endpoint in your server, so in this scenario that request gets executed and the server will think that you're the one whos sending the request even though it was that malicious website, This works since http is a stateless protocol (The server does not store any information of client's session eg:http), So the client has to send the cookies when it sends a request to a specific website(cookies which are specific to that website), Hence the delete post request is executed.

In a nutshell:
1) You as an admin is logged into a website.
2) You click on the malicious website's link.
3) Javascript code gets executed on the malicious website sending a hidden form to your delete user endpoint along with your cookies since http is stateless,hence the server executes the query and your user accounts gets deleted.

Rectification:

1) Using CSRF tokens ->  CSRF tokens are generated by the server and gets send to the client, On subsequent request the client sends this csrf token back to the server hence the verifying the integrity of the client, Usually this csrf token is set at a form element on the client side.(The token is generated by the server).Hence the malicious website won't be able to access csrf token, hence without the csrf token the server would just reject the request.